<!DOCTYPE html>
<html>
<head>
  <title>DexySpa.js - Simple SPA</title>
  <link rel="stylesheet" href="./assets/css/bootstrap/bootstrap.min.css">

  <style>
    .tab-pane.fade {
    transition: all 0.3s;
    transform: translateY(1rem);
  }

  .tab-pane.fade.show {
    transform: translateY(0rem);
  }

  </style>
</head>
<body>
  <div class="container">
    <!-- Navigation Menu -->
    <ul class="nav nav-tabs" id="navigationTabs">
      <li class="nav-item">
        <a class="nav-link" href="#start" data-page-link="start">Start</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#about" data-page-link="about">About</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#bot" data-page-link="bot">Bot</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#market" data-page-link="market">Market</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#balance" data-page-link="balance">Balance</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#login" data-page-link="login">Login</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#logout" data-page-link="logout">Logout</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#profile" data-page-link="profile">Profile</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="#profile" data-page-link="profile">Profile</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="#vip1" data-page-link="vip1">Vip 1</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#vip2" data-page-link="vip2">Vip 2</a>
      </li>
      
    </ul>
    
    <!-- Page Contents -->
    <div class="tab-content" id="pageContents">
      <!-- Start Page -->
      <div id="start" data-page="start" class="tab-pane fade">
        <h3>Start Page</h3>
        <!-- Add your content for the Start page here -->
        <div class="card">
          Lorem ipsum mipsum dolore... start
        </div>
      </div>

      <!-- About Page -->
      <div id="about" data-page="about" class="tab-pane fade">
        <h3>About Page</h3>
        <!-- Add your content for the About page here -->
        <div class="card">
          Lorem ipsum mipsum dolore... about
        </div>
      </div>

      <!-- Bot Page -->
      <div id="bot" data-page="bot" class="tab-pane fade">
        <h3>Bot Page</h3>
        <!-- Add your content for the Bot page here -->
        <div class="card">
          Lorem ipsum mipsum dolore... bot
        </div>
      </div>

      <!-- Market Page -->
      <div id="market" data-page="market" class="tab-pane fade">
        <h3>Market Page</h3>
        <!-- Add your content for the Market page here -->
        <div class="card">
          Lorem ipsum mipsum dolore... market
        </div>
      </div>
      
      <!-- Login Page -->
      <div id="login" data-page="login" class="tab-pane fade">
        <h3>Login Page</h3>
        <!-- Add your content for the Login page here -->
        <div class="card">
          Lorem ipsum mipsum dolore... login
        </div>
      </div>

      <!-- Logout Page -->
      <div id="logout" data-page="logout" class="tab-pane fade">
        <h3>Logout Page</h3>
        <!-- Add your content for the Logout page here -->
        <div class="card">
          Lorem ipsum mipsum dolore... logout
        </div>
      </div>

      <!-- Balance Page -->
      <div id="balance" data-page="balance" class="tab-pane fade">
        <h3>Balance Page</h3>
        <!-- Add your content for the Balance page here -->
        <div class="card">
          Lorem ipsum mipsum dolore... balance
        </div>
      </div>

      <!-- Profile Page -->
      <div id="profile" data-page="profile" class="tab-pane fade">
        <h3>Profile Page</h3>
        <!-- Add your content for the Balance page here -->
        <div class="card">
          Lorem ipsum mipsum dolore... profile..
        </div>
      </div>

      <!-- VIP1 Page -->
      <div id="vip1" data-page="vip1" class="tab-pane fade">
        <h3>VIP 1 Page</h3>
        <!-- Add your content for the Balance page here -->
        <div class="card">
          Lorem ipsum mipsum dolore... vip1..
        </div>
      </div>
      <!-- VIP2 Page -->
      <div id="vip2" data-page="vip2" class="tab-pane fade">
        <h3>VIP 2 Page</h3>
        <!-- Add your content for the Balance page here -->
        <div class="card">
          Lorem ipsum mipsum dolore... vip2..
        </div>
      </div>
      
    </div>  <!-- //Page Contents -->
    
    <!-- DexySPA.js info -->
    <div class="py-4" id="dexySPAInfo">
      <!-- Display version and credits -->
      
      <p>DexySPA v0.24 - Updates:</p>
      <ul>
        <li>Added support for VIP memberships with dynamic page access permissions based on user's membership level</li>
        <li>Updated comments and improved code readability</li>
        <li>Replaced "data-page" with "data-page-link" for nav-links</li>
        <li>Added "data-page" for pages as an alternative for "#id-navigation"</li>
      </ul>
      
      <p>DexySPA v0.22 - Updates:</p>
      <ul>
        <li>Removed JQuery dependency for improved performance and reduced file size.</li>
        <li>Improved handling of invalid routes for better error handling.</li>
        <li>Enhanced handling of unauthorized page access for enhanced security.</li>
        <li>Upgraded Router.JS for seamless navigation of hash-pages in VanillaJS.</li>
        <li>In addition to the updates mentioned above, the DexySPA framework now includes the `dexyspa.class.js` file. This file contains the `DexySPA` class, which serves as the core component of the DexySPA framework. You can use this class to initialize and configure your SPA.</li>
      </ul>

      <p><strong>About DexySPA.js</strong> </p>
        <ul>
          <li>DexySPA is a professional single-page application (SPA) framework that provides essential functionality along with robust routing support. It enables you to build powerful web applications with ease.</li>
          We are utilizing a modified version of <a href="https://github.com/silviodelgado/routerjs" target="_blank">RouterJS</a>, an open-source lightweight routing library created by <strong>silviodelgado</strong>, which incorporates enhancements for seamless navigation with URL parameters. <strong>You can find the enhanced version at <a href="https://github.com/anoxxxy/routerjs" target="_blank">RouterJS - enhanced</a></strong>.
          </li>
        </ul>

    </div>

  </div>  <!-- //Container -->


  <script src="./assets/js/bootstrap/bootstrap.min.js"></script>
  
  <script src="./assets/js/router/router.js"></script>
  <script src="./assets/js/dexyspa.class.js"></script>
  <script>
    //init project variables
    let userIsLoggedIn = false;
    let userMembership = 'gold';
// Create your own router instance
//const myRouter = new Router();

// Configure your router as needed
// Create an instance of Router


// Add routes to the router
Router
.add(/^$/, (data) => {
  console.log('**Empty page**');
})
.add(/^start$/, (data) => {
  console.log('**Start page**');
})
.add(/^about$/, (data) => {
  console.log('About page');
})
.add(/^bot$/, (data) => {
  console.log('Bot page');
})
.add(/^balance$/, (data) => {
  console.log('Balance page');
})
.add(/^profile$/, (data) => {
  console.log('Profile page');
})
.add(/^market$/, (data) => {
  console.log('Market page');
})
.add(/^vip1$/, (data) => {
  console.log('Vip 1 page');
})
.add(/^vip2$/, (data) => {
  console.log('Vip 2 page');
})


//membership based page permissions
const membershipPermissions = {
  'gold': {
    'permissions': ['vip1', 'vip2'],
  },
  'silver': {
    'permissions': ['vip1'],
  },
  'bronze': {
    'permissions': [],
  },
  '': {
    'permissions': [],
  },
};

// Create your own page availability configuration
const pagePermissions = {
  '': true,   //start page, when website is loaded
  start: true,
  about: true,
  bot: true, // Custom availability check based on login status
  balance: (isLoggedIn) => isLoggedIn, // Custom availability check based on login status
  market: true,
  login: (isLoggedIn) => !isLoggedIn, // Custom availability check based on login status
  logout: (isLoggedIn) => isLoggedIn, // Custom availability check based on login status
  profile: (isLoggedIn) => isLoggedIn, // Custom availability check based on login status
  vip1: {
    'membership': (isLoggedIn, userMembership) => {
      // Check if the user has the required membership to access vip2 page, in this case user must be a "silver/gold" member
      return isLoggedIn && membershipPermissions[userMembership]?.permissions.includes('vip1');
    },
  },
  vip2: {
    'membership': (isLoggedIn, userMembership) => {
      // Check if the user has the required membership to access vip2 page, in this case user must be a "gold" member
      return isLoggedIn && membershipPermissions[userMembership]?.permissions.includes('vip2');
    },
  },
};
const defaultPage = 'start'; // Replace with your desired default page

// Create an instance of DexySPA and pass your router instance and page availability configuration
const dexySPA = new DexySPA(Router, pagePermissions, membershipPermissions, defaultPage);

//set user login status
dexySPA.isUserLoggedIn = userIsLoggedIn || false;
dexySPA.userMembership = userMembership || '';

/*
OR do it this way:

// Define your custom callback functions
const unauthorizedPageAccessCallback = (page) => {
  alert(`Unauthorized page access: ${page}`);
  // Custom logic for handling unauthorized page access
};

const invalidRouteCallback = () => {
  alert('Invalid route detected');
  // Custom logic for handling invalid routes
};
//const dexySPA = new DexySPA(Router, pagePermissions, defaultPage, unauthorizedPageAccessCallback, invalidRouteCallback);
*/


// Example of triggering custom navigation outside the class
/*$('a[data-page-link="profile"]').on('click', () => {
  dexySPA.navigateToPage('profile');
  console.log('tried to navigate profile page');
});
*/
//dexySPA.navigateToPage('ice');
//console.log('tried to navigate ice');

/*
### DexySPA

DexySPA is a professional single-page application (SPA) framework that provides essential functionality along with robust routing support. It enables you to build powerful web applications with ease.

### Features

- **Routing Support:** DexySPA utilizes a modified version of RouterJS, an open-source lightweight routing library by silviodelgado, to facilitate seamless navigation and URL parameter handling.
- **Single-Page Application (SPA) Framework:** DexySPA empowers you to create dynamic and interactive SPAs, enhancing the user experience.
- **Easy Integration:** You can effortlessly integrate DexySPA into your existing web projects, leveraging its modular and flexible architecture.
- **Page Permissions:** DexySPA offers a page permission configuration system, allowing you to define access controls for different pages based on user authentication and other custom criteria.
- ** User Membership Pages: DexySpa.js supports the definition of specific pages that are accessible only to users with specific membership levels. This feature enables the creation of exclusive content and tailored experiences based on user membership.

### Getting Started

To start using DexySPA in your project, follow these steps:

1. Include the `dexyspa.class.js` file in your project.
2. Initialize the DexySPA instance by instantiating the `DexySPA` class with the necessary parameters.
3. Configure the routing and page permissions using the provided methods.
4. Implement the required page handlers and callbacks to customize the behavior of your application.
5. Start the router to enable routing functionality.
*/

  </script>
</body>
</html>
